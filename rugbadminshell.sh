#!/bin/bash #userlist=cat /etc/passwd | awk 'BEGIN {FS=":"}{print $1}' TEXT1=`cat "/etc/passwd"` USERNUMBER=`wc -l /etc/passwd|cut -d' ' -f1` echo $USERNUMBER USERALLLIST=`echo "$TEXT1" | awk 'BEGIN {FS=":"}{print $1}'` echo $USERALLLIST echo "******************************************************************************" for((i=1;i<=$USERNUMBER;i++));do echo "这是第 $i 个用户"; FORUSER=`cut -d: -f1 /etc/passwd | head -$i | tail -1` echo $FORUSER #CHECKFULLUSER=`repquota /dev/sdb1 | grep $FORUSER | tr -s ' ' |cut -d ' ' -f1` CHECKFULLUSED=`repquota /dev/sdb1 | grep $FORUSER | tr -s ' ' |cut -d ' ' -f3` CHECKFULLUSED=${CHECKFULLUSED:=0} #若 num 为空或未设置时，则 num 设为值 0 #echo $CHECKFULLUSER echo $CHECKFULLUSED if [ $CHECKFULLUSED -eq 500000 ] then echo "over used" mv /app/data/$FORUSER/* /app/overuseddata #移动所有滥用文件到overuseddata（不包括隐藏的配置文件） echo "文件已移动" else echo "used well" fi done;